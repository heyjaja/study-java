# 스트림
* java8 API에 새로 추가된 기능
* 선언형(질의로 표현)으로 컬렉션 데이터 처리
* 고수준 빌딩 블록으로 여러 연산을 파이프라인으로 연결
* 선언형: 간결하고 가독성 향상
* 조립 가능: 유연성 향상
* 병렬화: 성능 향상
* java.util.stream.Stream 참고

### 스트림이란?
데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소
* 연속된 요소: 특정 요소 형식으로 이루어진 연속된 값 집합의 인터페이스 제공 - 표현 계산식
* 소스: 컬렉션, 배열, I/O 자원 등의 데이터 제공 소스로부터 데이터를 소비 - 순서 유지
* 데이터 처리 연산: 함수형 프로그래밍 언어와 데이터베이스와 비슷한 연산 지원 - 순차적 혹은 병렬

특징
* 파이프라이닝 - 스트림 연산끼리 연결할 수 있도록 스트림 자신을 반환(laziness, short-circuiting)
* 내부 반복 - 반복을 알아서 처리
* 스트림은 한번만 소비할 수 있음

컬렉션 vs 스트림
* 외부 반복 - 사용자가 명시적으로 직접 요소를 반복(for-each)
  * 병렬성을 스스로 관리(포기 혹은 synchronized)
* 내부 반복 - 반복을 알아서 처리하고 결과 스트림 값을 어딘가 저장
  * 스트림 라이브러리에서는 데이터 표현과 하드웨어를 활용해 병렬성 구현을 자동으로 선택
  * filter, map 같이 반복을 숨겨주는 연산 리스트 미리 정의

### 스트림 연산
* reduce를 이용하면 내부 반복이 추상화되면서 병렬로 실행
* 외부 반복에서는 sum 변수 공유가 필요해 병렬화 어려움
* map, filter 등은 내부 상태를 갖지 않는 연산
* reduce, sum, max 같은 연산은 내부 상태 필요
* 내부 상태 크기는 한정됨
* sorted, distinct 같은 연산은 모든 요소가 버퍼에 추가되어 있어야 함
